{{ define "main" }}
{{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
{{ $dateHuman := .Date | time.Format ":date_long" }}


<div class="mb-8 pb-8 border-b-[1px] border-gray-200 dark:border-gray-700">
	
	<!-- Back to posts button -->
	<a href='{{ relLangURL "posts" }}' class="text-gray-500 hover:text-gray-600 flex items-center mb-4">
		<span>
			{{ i18n "single.back-to-posts" }}
		</span>
	</a>

	<!-- Folder and info -->
	<div class="flex items-center gap-2 mb-4">

		<!-- Folder -->
		{{ with .Params.folders }}
			{{ range . }}
				<a href='{{ (printf "/folders/%s" (. | urlize)) | relLangURL }}' class="btn btn-xs btn-primary">
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" class="inline-block fill-current">
						<!-- [Folder] !Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
						<path d="M128 464L512 464C520.8 464 528 456.8 528 448L528 208C528 199.2 520.8 192 512 192L362.7 192C345.4 192 328.5 186.4 314.7 176L276.3 147.2C273.5 145.1 270.2 144 266.7 144L128 144C119.2 144 112 151.2 112 160L112 448C112 456.8 119.2 464 128 464zM512 512L128 512C92.7 512 64 483.3 64 448L64 160C64 124.7 92.7 96 128 96L266.7 96C280.5 96 294 100.5 305.1 108.8L343.5 137.6C349 141.8 355.8 144 362.7 144L512 144C547.3 144 576 172.7 576 208L576 448C576 483.3 547.3 512 512 512z"/>
					</svg>
					<span>{{ strings.FirstUpper . }}</span>
				</a>
			{{ end }}
		{{ end }}

		<!-- Published Date -->
		<div class="text-sm flex items-center gap-1 text-gray-400">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16" class="inline-block fill-current text-gray-500">
				<!-- [Calendar] !Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
				<path d="M216 64C229.3 64 240 74.7 240 88L240 128L400 128L400 88C400 74.7 410.7 64 424 64C437.3 64 448 74.7 448 88L448 128L480 128C515.3 128 544 156.7 544 192L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 192C96 156.7 124.7 128 160 128L192 128L192 88C192 74.7 202.7 64 216 64zM480 496C488.8 496 496 488.8 496 480L496 416L408 416L408 496L480 496zM496 368L496 288L408 288L408 368L496 368zM360 368L360 288L280 288L280 368L360 368zM232 368L232 288L144 288L144 368L232 368zM144 416L144 480C144 488.8 151.2 496 160 496L232 496L232 416L144 416zM280 416L280 496L360 496L360 416L280 416zM216 176L160 176C151.2 176 144 183.2 144 192L144 240L496 240L496 192C496 183.2 488.8 176 480 176L216 176z"/>
			</svg>
			{{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
			{{ $dateHuman := .Date | time.Format ":date_long" }}
			<time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>
		</div>

	</div>

	<!-- Post title -->
	<h1 class="text-5xl font-bold pb-8">{{ .Title }}</h1>

	<!-- Summary -->
	{{ with .Params.summary }}
		<div class="text-lg text-muted-foreground max-w-2xl text-pretty mb-8">
			{{ . }}
		</div>
	{{ end }}

	<!-- Tags -->
	<div class="flex items-center gap-1 text-gray-400">
		{{ if .Params.tags }}
			{{ with .Params.tags }}
				{{ range . }}
					<a href='{{ (printf "/tags/%s" (. | urlize)) | relLangURL }}' class="btn btn-xs btn-primary btn-outline mr-1 mb-1">
						{{ strings.FirstUpper . }}
					</a>
				{{ end }}
			{{ end }}
		{{ end }}
	</div>

</div>

<div class="{{ if ne .Params.hideTableOfContent true }}grid grid-cols-1 lg:grid-cols-4 gap-4{{end}}">
	{{ if ne .Params.hideTableOfContent true }}
		<aside class="order-1 lg:order-2">
			
			<!-- Table of contents -->
			<div
				id="table-of-contents"
				class="rounded-xl border border-gray-200 dark:border-gray-700 shadow-xl p-4 sticky top-20 lg:overflow-y-auto lg:max-h-[80vh]"
			>
				{{ partial "toc/toc.html" . }}
			</div>

		</aside>
	{{ end }}
	<article class="col-span-3 prose lg:prose-lg max-w-none order-2 lg:order-1">
		{{ .Content }}
	</article>
</div>

{{ end }}